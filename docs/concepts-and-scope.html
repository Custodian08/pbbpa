<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Концепции и границы проекта</title>
  <style>
    :root { --fg:#111; --bg:#fff; --muted:#666; --accent:#1677ff; }
    html, body { margin:0; padding:0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif; color:var(--fg); background:var(--bg); }
    header { padding:24px 20px; border-bottom:1px solid #eee; }
    main { padding:20px; max-width: 980px; margin: 0 auto; }
    h1 { margin: 0 0 8px; font-size: 24px; }
    h2 { margin-top: 28px; font-size: 20px; }
    h3 { margin-top: 18px; font-size: 18px; }
    nav { margin-top:8px; color: var(--muted); }
    nav a { color: var(--accent); text-decoration: none; margin-right: 12px; }
    section { margin: 18px 0 32px; }
    ul { margin: 8px 0 12px 22px; }
    .note { color: var(--muted); }
  </style>
</head>
<body>
  <header>
    <h1>Концепции и границы проекта</h1>
    <nav>
      <a href="#sec-1">1. Бизнес-требования</a>
      <a href="#sec-2">2. Рамки и ограничения</a>
      <a href="#sec-3">3. Бизнес-контекст</a>
    </nav>
  </header>
  <main>
    <section id="sec-1">
      <h2>1. Бизнес-требования</h2>

      <p><strong>Бизнес-цель</strong> — финансовая или нефинансовая выгода, которую организация ожидает получить в результате реализации проекта или другой инициативы. Для документирования бизнес-правил использован шаблон, представленный в таблице 2.1.</p>

      <h3>Исходные данные</h3>
      <ul>
        <li>Организация управляет фондом помещений (квартиры/офисы), сдает их в аренду конечным клиентам.</li>
        <li>Текущие процессы частично ручные: резервации по телефону/почте, договоры и счета в офисных редакторах, платежи сверяются вручную.</li>
        <li>Требуется единая система для каталога, резерваций, договоров, биллинга, счетов/платежей и аудита действий персонала.</li>
      </ul>

      <h3>Возможности бизнеса</h3>
      <ul>
        <li>Сократить цикл «лид → договор → счет → оплата» за счет автоматизации.</li>
        <li>Повысить заполняемость фонда за счет быстрого резервирования и прозрачного статуса занятости.</li>
        <li>Снизить дебиторскую задолженность благодаря регулярному биллингу и контролю статусов счетов/платежей.</li>
        <li>Обеспечить контролируемый доступ к админ-панели и операционным функциям (RBAC).</li>
      </ul>

      <h3>Бизнес-цели</h3>
      <ul>
        <li>Сократить время подготовки договора и счета до 5 минут.</li>
        <li>Увеличить конверсию брони в договор на N% за квартал (за счет мгновенного резервирования).</li>
        <li>Снизить просрочку по оплатам на N% за полугодие (за счет регулярного биллинга и контроля статусов).</li>
        <li>Повысить прозрачность и подотчетность через аудит всех ключевых операций.</li>
      </ul>

      <h3>Критерии успеха</h3>
      <ul>
        <li>Не менее 95% счетов по активным договорам формируются автоматически по расписанию или вручную за минуту.</li>
        <li>Ошибки разнесения платежей снижаются до &lt; 2% благодаря импорту и сопоставлению.</li>
        <li>Время отклика списков (до 100 записей/страницу) ≤ 1 сек.</li>
        <li>Успешный аудит: все CRUD и бизнес-операции отражаются в журнале.</li>
      </ul>

      <h3>Положение о концепции проекта</h3>
      <ul>
        <li>Веб-приложение с ролевой моделью доступа: Admin, Accountant, Operator, User, др.</li>
        <li>Трехзвенная архитектура: SPA (React) + REST API (NestJS) + БД (PostgreSQL, Prisma ORM).</li>
        <li>Ключевые домены: Каталог → Резервации → Договоры → Начисления/Счета → Платежи → Аудит.</li>
      </ul>

      <h3>Бизнес-риски</h3>
      <ul>
        <li>Миграция существующих данных (качество, неполнота).</li>
        <li>Неправильное разграничение прав может привести к инцидентам доступа.</li>
        <li>Задержки интеграций (почта/банк) и зависимость от внешних сервисов.</li>
        <li>Нагрузочные пики при биллинге и экспортах (падение производительности).</li>
      </ul>

      <h3>Предположения и зависимости</h3>
      <ul>
        <li>Импорт платежей доступен из CSV/Excel; прямые интеграции с банком могут быть реализованы позднее.</li>
        <li>Уведомления по e‑mail включаются при наличии SMTP-конфигурации.</li>
        <li>Развертывание на Windows/Linux‑серверах или в контейнерах; требуется PostgreSQL 14+ и Node.js 18+.</li>
        <li>Заказчик предоставляет справочники VAT/ставок/шаблонов документов.</li>
      </ul>

      <h3>Таблица 2.1 – Бизнес-правила</h3>
      <table border="1" cellspacing="0" cellpadding="6" style="border-collapse:collapse; width:100%">
        <thead style="background:#fafafa">
          <tr>
            <th>Иденти-фикатор</th>
            <th>Определение правила</th>
            <th>Тип правила</th>
            <th>Статическое и динамическое</th>
            <th>Источник</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>BR-1</td>
            <td>Разграничить доступ к админ‑панели: разделы «Пользователи», «Настройки», «Аудит» доступны только Администратору.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Безопасность/Владелец</td>
          </tr>
          <tr>
            <td>BR-2</td>
            <td>Запретить пересечение периодов договоров по одному помещению и обратные даты.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Бизнес</td>
          </tr>
          <tr>
            <td>BR-3</td>
            <td>Запрет двойной брони и конфликта с активным или завершающимся договором.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Бизнес</td>
          </tr>
          <tr>
            <td>BR-4</td>
            <td>Формировать начисления и счета за выбранный период для всех ACTIVE‑договоров.</td>
            <td>Факт</td>
            <td>Динамическое</td>
            <td>Бухгалтер</td>
          </tr>
          <tr>
            <td>BR-5</td>
            <td>Генерировать PDF‑договор и присваивать номер/дату при активации договора.</td>
            <td>Факт</td>
            <td>Динамическое</td>
            <td>Юрист/Менеджер</td>
          </tr>
          <tr>
            <td>BR-6</td>
            <td>Пользователь может отменять только собственные активные резервации.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Безопасность</td>
          </tr>
          <tr>
            <td>BR-7</td>
            <td>Сопоставлять платежи со счетами и автоматически пересчитывать статусы счетов.</td>
            <td>Выводы</td>
            <td>Динамическое</td>
            <td>Бухгалтер</td>
          </tr>
          <tr>
            <td>BR-8</td>
            <td>Вести аудит CRUD и ключевых бизнес‑операций с фильтрацией и экспортом журналов.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Администратор</td>
          </tr>
          <tr>
            <td>BR-9</td>
            <td>Обеспечить уникальность УНП арендатора и кода помещения.</td>
            <td>Ограничения</td>
            <td>Статическое</td>
            <td>Регламент</td>
          </tr>
          <tr>
            <td>BR-10</td>
            <td>Хранить и применять ставки НДС; рассчитывать суммы с НДС в счетах.</td>
            <td>Факт</td>
            <td>Динамическое</td>
            <td>Бухгалтер</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="sec-2">
      <h2>2. Рамки и ограничения проекта</h2>

      <h3>Основные функции</h3>
      <ul>
        <li>Разграничение доступа к админ-панели (Admin).</li>
        <li>Резервации: создание пользователем, отмена (Admin/Accountant).</li>
        <li>Договоры: создание/ведение и генерация PDF.</li>
        <li>Биллинг за период, оформление счетов.</li>
        <li>Аудит действий пользователей.</li>
        <li>Создание предложения об аренде в каталоге (по согласованию).</li>
      </ul>

      <h3>Объем первоначально запланированной версии</h3>
      <ul>
        <li>MUST: F001–F008 (по разделу 4.1), включая генерацию PDF договоров и выпуск счетов.</li>
        <li>UI: Каталог, Резервации, Договоры, Счета, Платежи, Администрирование, Личный кабинет.</li>
        <li>NFR: аутентификация JWT, RBAC, аудит, производительность списков, миграции БД.</li>
      </ul>

      <h3>Объем последующих версий</h3>
      <ul>
        <li>Интеграции с банковскими API для автоимпорта платежей.</li>
        <li>Расширенные отчеты/дашборды, аналитика заполненности и просрочки.</li>
        <li>Электронное подписание и обмен документами.</li>
        <li>Мобильная/адаптивная оптимизация под полевую работу.</li>
      </ul>

      <h3>Ограничения и исключения</h3>
      <ul>
        <li>Онлайн-эквайринг и ЭДО могут быть вне рамок первоначальной версии.</li>
        <li>Интеграции с 1С/ERP — в последующих версиях или по отдельному ТЗ.</li>
        <li>Нет SLA на массовые экспорты &gt; 50k строк без отдельной оптимизации.</li>
      </ul>

      <h3>Операционная среда</h3>
      <ul>
        <li>OE-1 Программное средство работает в современных браузерах: Google Chrome, Microsoft Edge, Mozilla Firefox (актуальные версии); Internet Explorer не поддерживается.</li>
        <li>OE-2 Программное средство разворачивается на сервере Node.js (HTTP/HTTPS), совместимо с Windows/Linux и Docker.</li>
        <li>OE-3 В качестве СУБД используется PostgreSQL 14+.</li>
      </ul>

      <h3>Ограничения дизайна и реализации</h3>
      <ul>
        <li>CO-1 Код следует корпоративным Code Conventions для TypeScript/Node.js (линтер, форматтер, коммиты).</li>
        <li>CO-2 На стороне сервера используется Node.js 18+ и NestJS (TypeScript 5+).</li>
        <li>CO-3 На стороне клиента используется React 18+, Ant Design; HTML должен соответствовать стандарту HTML5.</li>
        <li>CO-4 ORM Prisma с миграциями; все изменения схемы — только через миграции.</li>
        <li>CO-5 RBAC и аудит обязательны для всех критических операций.</li>
      </ul>

      <h3>Предположения и зависимости (с кодами)</h3>
      <ul>
        <li>DE-1 Доступность ПС для сотрудников и клиентов — 24/7 (без строгого SLA в v1).</li>
        <li>DE-2 SMTP‑уведомления включаются при наличии конфигурации; без неё уведомления отключены.</li>
        <li>DE-3 Импорт платежей из CSV/Excel; прямые банковские интеграции — в последующих версиях.</li>
      </ul>
    </section>

    <section id="sec-3">
      <h2>3. Бизнес-контекст</h2>

      <h3>Профили заинтересованных лиц</h3>
      <ul>
        <li><strong>Собственник/Руководство</strong>: прозрачность показателей, отчеты, контроль рисков.</li>
        <li><strong>Admin</strong>: создание пользователей/ролей, доступ к настройкам и журналам.</li>
        <li><strong>Accountant</strong>: договоры, биллинг, счета, платежи, отчеты.</li>
        <li><strong>Operator</strong>: резервации, справочники, сопровождение договоров.</li>
        <li><strong>User (арендатор)</strong>: каталог, бронирование, личный кабинет «Мои *».</li>
        <li><strong>ИТ/Безопасность</strong>: эксплуатация, резервное копирование, контроль доступа.</li>
      </ul>

      <h3>Приоритеты проекта</h3>
      <ul>
        <li>MUST: безопасность (JWT/RBAC), резервации, договоры, биллинг, счета, аудит.</li>
        <li>SHOULD: платежи (импорт/разнесение), отчеты, удобство UI.</li>
        <li>COULD: предложения/лиды, уведомления e‑mail, расширенные метрики.</li>
      </ul>

      <h3>Особенности развертывания</h3>
      <ul>
        <li>База данных: PostgreSQL 14+; миграции — Prisma Migrate; первичное наполнение через seed.</li>
        <li>API: NestJS, конфигурация .env (секреты JWT, SMTP, origin CORS).</li>
        <li>Клиент: React + Vite; переменная окружения VITE_API_BASE_URL.</li>
        <li>Инфраструктура: возможна установка на Windows/Linux или Docker; резервное копирование БД обязательно.</li>
      </ul>

      <h3>Таблица 2.2 – Профили заинтересованных лиц</h3>
      <table border="1" cellspacing="0" cellpadding="6" style="border-collapse:collapse; width:100%">
        <thead style="background:#fafafa">
          <tr>
            <th>Заинтересованное лицо</th>
            <th>Основная ценность</th>
            <th>Отношение</th>
            <th>Основные интересы</th>
            <th>Ограничения</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Оператор</td>
            <td>Увеличение производительности и сокращение ручной работы</td>
            <td>Поддержка и контроль</td>
            <td>Быстрое создание/отмена резерваций, ведение справочников и договоров</td>
            <td>Доступ к ПС в рабочее время; права согласно роли</td>
          </tr>
          <tr>
            <td>Бухгалтер</td>
            <td>Точность начислений, счетов и платежей</td>
            <td>Поддержка</td>
            <td>Биллинг за период, оформление счетов, импорт/разнесение платежей</td>
            <td>Доступ к ПС 24/7; ограничения на разделы «Пользователи/Аудит»</td>
          </tr>
          <tr>
            <td>Менеджер/Руководство</td>
            <td>Прозрачность и аналитика</td>
            <td>Озабоченность обучением</td>
            <td>Отчеты, дашборды, показатели заполняемости и дебиторки</td>
            <td>Доступ на чтение; 24/7</td>
          </tr>
          <tr>
            <td>Клиент (Арендатор)</td>
            <td>Экономия времени, прозрачные резервации/счета</td>
            <td>Автоматизированный сервис</td>
            <td>Каталог, «Зарезервировать», личный кабинет «Мои *», PDF счетов</td>
            <td>Доступ 24/7; только к своим данным</td>
          </tr>
          <tr>
            <td>Администратор</td>
            <td>Контроль доступа и соответствие политикам</td>
            <td>Контроль</td>
            <td>Управление пользователями/ролями, настройками, аудитом</td>
            <td>Полные права; ответственность за безопасность</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>
</body>
</html>
